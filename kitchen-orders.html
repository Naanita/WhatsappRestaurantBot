<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Pedidos de Cocina</title>
    <style>
        body { font-family: Arial, sans-serif; }
        table { border-collapse: collapse; width: 100%; }
        th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
        th { background-color: #f2f2f2; }
        .pending { background-color: #fff3cd; } /* Amarillo claro */
        .delayed { background-color: #f8d7da; } /* Rojo claro */
        .ok { background-color: #d4edda; } /* Verde claro */
    </style>
</head>
<body>
    <h2>Pedidos de Cocina</h2>
    <table id="ordersTable">
        <thead>
            <tr>
                <th># Pedido</th>
                <th>Hora</th>
                <th>Detalle</th>
                <th>Estado</th>
            </tr>
        </thead>
        <tbody>
            <!-- Los pedidos se insertarán aquí -->
        </tbody>
    </table>
    <script>
        // Simulación de pedidos (puedes reemplazar esto por una llamada a tu backend)
        const pedidos = [
            { id: 1, hora: '10:00', detalle: 'Pizza', estado: 'pendiente', timestamp: Date.now() - 5 * 60 * 1000 }, // 5 min
            { id: 2, hora: '10:05', detalle: 'Hamburguesa', estado: 'pendiente', timestamp: Date.now() - 15 * 60 * 1000 }, // 15 min
            { id: 3, hora: '10:10', detalle: 'Ensalada', estado: 'despachado', timestamp: Date.now() - 2 * 60 * 1000 }, // 2 min
        ];

        function getRowClass(pedido) {
            if (pedido.estado === 'despachado') return 'ok';
            const minutos = (Date.now() - pedido.timestamp) / 60000;
            if (minutos > 10) return 'delayed'; // Más de 10 minutos: rojo
            if (minutos > 5) return 'pending';  // Más de 5 minutos: amarillo
            return '';
        }

        function renderPedidos() {
            const tbody = document.querySelector('#ordersTable tbody');
            tbody.innerHTML = '';
            pedidos.sort((a, b) => a.timestamp - b.timestamp); // Ordenar por llegada
            pedidos.forEach(pedido => {
                const tr = document.createElement('tr');
                tr.className = getRowClass(pedido);
                tr.innerHTML = `
                    <td>${pedido.id}</td>
                    <td>${pedido.hora}</td>
                    <td>${pedido.detalle}</td>
                    <td>${pedido.estado}</td>
                `;
                tbody.appendChild(tr);
            });
        }

        // Actualizar colores cada minuto
        setInterval(renderPedidos, 60000);
        renderPedidos();
    </script>
</body>
</html>
